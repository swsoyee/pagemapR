---
title: "Introduction to pagemap"
author: "Wei Su"
date: "`r Sys.Date()`"
output:
  # md_document:
  #   pandoc_args: ["--wrap=preserve"]
  html_document:
    theme: flatly
    toc: true
    toc_float: true
---

<!--
%\VignetteEngine{knitr::rmarkdown}
%\VignetteIndexEntry{Introduction to pagemap}
-->

```{r setup, echo=FALSE, results='asis'}
if (!knitr::is_html_output(excludes = "markdown")) {
  knitr::opts_chunk$set(eval = FALSE)
  logo_path <- "./vignettes/pagemap.png"
  cat("# pagemapR")
} else {
  logo_path <- "./pagemap.png"
}
```

```{r generate_hex_sticker, echo=FALSE, warning=FALSE, message=FALSE}
library(hexSticker)
library(showtext)
library(ggplot2)
font_add_google("Rubik")

icon_data <- data.frame(
  x1 = c(1,  6,   1,   1,   5,   5,   5,   5,   5),
  x2 = c(8,  8,   5.5, 4.5, 8,   8,   8,   8,   8),
  y1 = c(9,  6,   6,   1,   5,   4,   3,   2,   1),
  y2 = c(10, 8.5, 8.5, 5.5, 5.5, 4.5, 3.5, 2.5, 1.5),
  t = c('1', '2', '1', '2', '3', '3', '3', '3', '3')
)

p <- ggplot() +
  scale_x_continuous(name = "x") +
  scale_y_continuous(name = "y") +
  geom_rect(
    data = icon_data,
    mapping = aes(
      xmin = x1,
      xmax = x2,
      ymin = y1,
      ymax = y2,
      fill = t
    ),
    alpha = 0.5,
    show.legend = FALSE
  ) +
  scale_fill_manual(values = c("#999999", "#666666", "#333333")) +
  theme_void() +
  theme_transparent()

sticker(
  p,
  package = "pagemap",
  p_size = 9,
  p_y = 1.3,
  p_color = rgb(0, 0, 0, 0.8),
  p_family = "Rubik",
  h_size = 1.5,
  h_fill = rgb(0, 0, 0, 0.1),
  h_color = rgb(0, 0, 0, 0.5),
  s_x = 1,
  s_y = 0.9,
  s_width = 1.3,
  s_height = 1,
  filename = logo_path
)
```

```{r logo, echo=FALSE, results='asis', eval=TRUE}
cat(
  sprintf(
    "<img src='%s' width='180' align='right' style='max-width:50%%;margin-left:20px;'>",
    logo_path
  )
)
```

<!-- badges: start -->
[![R build status](https://github.com/swsoyee/pagemapR/workflows/R-CMD-check/badge.svg)](https://github.com/swsoyee/pagemapR/actions)
<!-- badges: end -->

## Introduction

This is an R package that provides support for [`pagemap`](https://larsjung.de/pagemap/) as a [`htmlwidget`](http://htmlwidgets.org/).  
Quickly and easily add a mini map to your rmarkdown `html` documents. 
See a demonstration [here](https://swsoyee.github.io/pagemapR/).

> Note: To distinguish it from the [original project `pagemap`](https://larsjung.de/pagemap/), the name of this project is `pagemapR`, but the package name is `pagemap`.


## Installation

`pagemapR` is not on CRAN now (may be later), you can use [`devtools`](https://www.r-project.org/nosvn/pandoc/devtools.html) to install the latest development version.

```{r installation, eval=FALSE}
# install.packages("devtools")
devtools::install_github('swsoyee/pagemapR')
```

## Usage

It's very simple to use.

```{r usage, eval=FALSE}
pagemap::pagemap(id = "mini_map")
```

You could fix it's position on the screen and style by providing a `list` of css property.

```{r box_style, eval=FALSE}
pagemap::pagemap(id = "mini_map",
                 box_style = list(left = "5px", top = "10px"))
```

You could also customize the internal style of the mini map through the API provided by [`pagemap`](https://larsjung.de/pagemap/).

```{r customize_pagemap}
pagemap::pagemap(
  id = "mini_map",
  styles = list(
    'h1,h2,a,code' = 'rgba(0,0,0,0.10)',
    'img' = 'rgba(0, 0, 0, 0.08)',
    'pre' = 'rgba(0,0,0,0.04)'
  )
)
```

## Credit

This package is thanks to the work done by **Lars Jung** (<https://github.com/lrsjng>), the author of the original Javascript package `pagemap`. Also, thanks should also go to Ramnath Vaidyanathan, Kenton Russell, and RStudio, Inc. for the amazing work on create [`htmlwigets`](https://www.htmlwidgets.org/) package. The hex sticker of `pagemap`is produced by [`hexSticker`](https://github.com/GuangchuangYu/hexSticker) and [`ggplot2`](https://ggplot2.tidyverse.org/), so special thanks goes to the **Guangchuang YU** (<https://guangchuangyu.github.io>) and the `ggplot2` development team.

## Contact

You are welcome to:

* Submit suggestions and bug-reports at: 
  <https://github.com/swsoyee/pagemapR/issues>
* Send a pull request on: <https://github.com/swsoyee/pagemapR>
* Compose a friendly e-mail to: <swsoyee@gmail.com>

## Code of Conduct

Please note that this project is released with a [Contributor Code of Conduct](https://github.com/swsoyee/pagemapR/blob/master/CODE_OF_CONDUCT.md). By participating in this project you agree to abide by its terms.
